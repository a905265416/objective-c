# 什么是回调函数

主函数调用回调函数去干点事情，然后返回给主函数。

比如主函数调用函数去解析配置文件，解析后的数据再调回给主函数，就是一个回调。

1、如果不用回调函数能不能实现功能？

2、能，那为什么要用回调函数

3、因为可以抽象、复用。写一个函数专门解析配置文件，然后返回解析后的值。就不需要每次需要的时候去写

4、另外，回调还可以解耦。

什么是解耦：将程序模块化、积木化。将程序做成一个个小模块，需要实现功能的时候将多个模块组合起来。

5、简单来说，解耦可以让程序结构更好，更容易读，更容易改，更容易修改的其中一个基本方法。

6、回调怎么解耦，A做一把椅子，但是步骤很多。其中一个步骤上漆应该是B来做。因为B是专门做上漆的。正确的方法不是A自己去买油漆刷子把这个步骤做了。而是叫来B来吧这个步骤做好。然后A继续组装椅子。

# 什么是delegate

对一个类的功能进行扩展和复用的方法。它的做法是：写一个附加的类提供附加的功能，并使用原来的类的实例提供原有的功能。

场景例子：为一个航空公司设计软件系统，于是我们必须用一些类来表示各种各样的“人”。包括机组人员、售票员、旅客等。一个思路是，因为这些人都是抽象的“人“，因此可以设计一个抽象的Person抽象类，并从这个类衍生出我们需要的各种类。由此得倒下面的图：

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi1zneeqe4j30bv05it8v.jpg)

这个方案有一个缺陷，一个机组人员在休假的时候可能乘坐飞机而成为一个旅客。一个人可能成为三种角色中的任何一种，如果我们坚持继承的思路，那么就会得到下图。

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi1zoict8dj30ex0aw0tg.jpg)

很明显，遇到了“类爆炸”问题。如果角色更多，类就会爆炸了。

而且即使使用了这么多衍生类，仍然有困难。因为继承所表现的是“is a kind of”关系是静态的，在编译时就固定了。而一个“人”可能在不同的时间扮演不同的角色，于是我们可能需要用多个对象来表现一个“人”的不同角色，这也是一件相当麻烦的事情。





### view delegate 的方法需要传 view 

view 通过 delegate 持有他的 ViewController，代理方法需要将 view 传进去。

为什么？

因为一个 ViewController 有多个 view，当 ViewController 执行代理方法的时候，需要知道是从哪个 view 调过来的。

例：

```objective-c
- (void)didRCTRootViewContentAppear:(RCTRootView *)rootView userInfo:(NSDictionary *)userInfo;
```

